# Android App Signing Guide

## Current Configuration

### Debug Builds ✅
- **Status**: Fully configured and working
- **Keystore**: Uses Android's default debug keystore
- **Location**: `~/.android/debug.keystore` (auto-generated)
- **Purpose**: Development and testing
- **GitHub Actions**: Works out of the box

### Release Builds ⚠️
- **Status**: Currently builds **unsigned APKs**
- **Output**: `app-release-unsigned.apk`
- **Purpose**: For manual signing or testing
- **Production**: Needs proper signing configuration

## How Signing Works

### Debug Signing (Current - Working)
```kotlin
buildTypes {
    debug {
        // Automatically uses debug keystore
        // No configuration needed
    }
}
```

**Debug keystore details:**
- Alias: `androiddebugkey`
- Password: `android`
- Auto-generated by Android SDK

### Release Signing (Future - Optional)

For production releases, you'll need to:

1. **Generate a release keystore:**
```bash
keytool -genkey -v -keystore release.keystore \
  -alias simple-live -keyalg RSA -keysize 2048 -validity 10000
```

2. **Update build.gradle.kts:**
```kotlin
signingConfigs {
    create("release") {
        storeFile = file("release.keystore")
        storePassword = System.getenv("KEYSTORE_PASSWORD") ?: "your-password"
        keyAlias = "simple-live"
        keyPassword = System.getenv("KEY_PASSWORD") ?: "your-password"
    }
}

buildTypes {
    release {
        signingConfig = signingConfigs.getByName("release")
        isMinifyEnabled = true
        isShrinkResources = true
    }
}
```

3. **Add keystore to .gitignore:**
```bash
echo "*.keystore" >> .gitignore
echo "*.jks" >> .gitignore
```

## GitHub Actions Setup (Optional)

To sign releases in GitHub Actions:

1. **Encode keystore to base64:**
```bash
base64 release.keystore > keystore.txt
```

2. **Add GitHub Secrets:**
   - Go to Settings → Secrets → Actions
   - Add secrets:
     - `KEYSTORE_BASE64` - Content of keystore.txt
     - `KEYSTORE_PASSWORD` - Your keystore password
     - `KEY_ALIAS` - Your key alias
     - `KEY_PASSWORD` - Your key password

3. **Update workflow:**
```yaml
- name: Decode keystore
  run: |
    echo "${{ secrets.KEYSTORE_BASE64 }}" | base64 -d > release.keystore

- name: Build signed APK
  env:
    KEYSTORE_PASSWORD: ${{ secrets.KEYSTORE_PASSWORD }}
    KEY_ALIAS: ${{ secrets.KEY_ALIAS }}
    KEY_PASSWORD: ${{ secrets.KEY_PASSWORD }}
  run: ./gradlew assembleRelease
```

## Current GitHub Actions Behavior

### What Works Now ✅

**Debug APK** (every push/PR):
- ✅ Builds successfully
- ✅ Signed with debug keystore automatically
- ✅ Can be installed on any device
- ✅ Downloads as `simple-live-debug.apk`

**Release APK** (master branch only):
- ✅ Builds successfully
- ⚠️ **Unsigned** - needs manual signing
- ✅ Downloads as `app-release-unsigned.apk`
- ❌ Cannot be installed directly (unsigned)

### How to Use Unsigned Release APK

Option 1: **Sign manually with debug key (for testing):**
```bash
jarsigner -verbose -sigalg SHA256withRSA -digestalg SHA-256 \
  -keystore ~/.android/debug.keystore \
  app-release-unsigned.apk androiddebugkey

zipalign -v 4 app-release-unsigned.apk app-release-signed.apk
```

Option 2: **Sign with production key (for release):**
```bash
jarsigner -verbose -sigalg SHA256withRSA -digestalg SHA-256 \
  -keystore release.keystore \
  app-release-unsigned.apk simple-live

zipalign -v 4 app-release-unsigned.apk app-release-signed.apk
```

Option 3: **Just use debug builds for testing**
- Debug APKs are already signed and installable
- Perfect for development and testing

## Recommendations

### For Development/Testing (Current Setup) ✅
```
Use DEBUG builds - they're signed automatically and work perfectly!
```

### For GitHub Distribution
```
Use DEBUG builds or set up GitHub Actions signing
```

### For Google Play Store
```
Must use proper release signing with production keystore
Google Play App Signing is recommended
```

## Summary

| Build Type | Signing Status | Can Install? | GitHub Actions |
|------------|----------------|--------------|----------------|
| Debug | ✅ Signed (auto) | ✅ Yes | ✅ Working |
| Release | ⚠️ Unsigned | ❌ No | ⚠️ Needs manual signing |

**Bottom line:** The app **will build successfully** in GitHub Actions. Debug builds are ready to use immediately. Release builds need manual signing or additional setup.

## Quick Start

**To get a working APK right now:**

1. Push to GitHub
2. Wait for GitHub Actions to complete
3. Download `simple-live-debug.apk` artifact
4. Install and use immediately ✅

No signing setup needed for development!
